
# Menu
1. [Sensor](#sensor)
  1. [Details](#details)
  2. [Configuration](#configuration)

# Sensor
 
Ο αισθητήρας που χρησιμοποιήθηκε είναι ο MPU6050 (GY 521 breakout board).

## Details

### Sensitivity
    
   Το εύρος των τιμών που δίνουν οι αισθητήρες είναι από -32768 έως 32767, δηλαδή 65536 τιμές συνολικά. Ανάλογα με την ευαισθησία που θα επιλέξουμε για το επιταχυνσιόμετρο και το γυροσκόπιο, καθορίζουμε το εύρος μετρήσεων στο οποίο αντιστοιχούν οι τιμές αυτές. Έτσι προκύπτει ο παρακάτω πίνακας:
   
   Sensor   |   Sel   |   Min   |   Max   |   LSB Sensitivity   |   Sensitivity
   ---|---|---|---|---|---
   Accelerometer|0|-2 g|+2 g|16384 LSB/g|0.06103515625 mg/LSB
   |1|-4 g|+4 g|8192 LSB/g|0.1220703125 mg/LSB
   |2|-8 g|+8 g|4096 LSB/g|0.244140625 mg/LSB
   |3|-16 g|+16 g|2048 SB/g|0.48828125 mg/LSB
   Gyroscope|0|-250 °/s|+250 °/s|131 LSB/°/s|0.00763358778625954198473282442748 °/s/LSB
   |1|-500 °/s|+500 °/s|65.5 LSB/°/s|0.01526717557251908396946564885496 °/s/LSB
   |2|-1000 °/s|+1000 °/s|32.8 LSB/°/s|0.03053435114503816793893129770992 °/s/LSB
   |3|-2000 °/s|+2000 °/s|16.4 LSB/°/s|0.06106870229007633587786259541985 °/s/LSB
   

### Sampling rate
   
   Μπορούμε να ελέγξουμε τον ρυθμό με τον οποίο δειγματοληπτούνται οι αισθητήρες για καθορίσουμε τον χρόνο με τον οποίο θα πρέπει να διαβάζουμε δεδομένα από την FIFO πριν γεμίσει.     
   
   Ο ρυθμός δειγματοληψίας καθορίζεται από την σχέση:  
         Sample_rate = (Gyroscope sample rate)/(1+SMPLRT_DIV[7:0]) 
         
   όπου Gyroscope sample rate:
   * 8kHz για 0<DLPF_CFG[2:0]<7  
   * 1kHz αλλιώς    
   
Όπως είναι προφανές, ο ρυθμός δειγματοληψίας κυμαίνεται από 8kHz μέχρι ~= 4 Hz. Να αναφερθεί ότι ο ρυθμός δειγματοληψίας για το επιταχυνσιόμετρο δεν μπορεί να υπερβεί το 1kHz. Για ρυθμό μεγαλύτερο από 1kHz, τα δεδομένα που θα παρέχονται θα είναι αντίγραφα προηγούμενων τιμών.

* __setSampleRate(int rate):__    Θέτει ρυθμό δειγματοληψίας τον κοντινότερο ακέραιο στο rate
* __getSampleRate():__   Επιστρέφει τον ρυθμό δειγματοληψίας

### FIFO
   
   Ο κατασκευαστής αναφέρει ότι αν δεν χρησιμοποιηθεί η στοίβα, τότε ο χρήστης πρέπει να διασφαλίσει ελέγχοντας το Data Ready interrut ότι δεν θα διαβάσει δεδομένα την στιγμή που νέα δεδομένα γράφονται στον ίδιο καταχωρητή. Έτσι για λόγους εξοικονόμησης ενέργειας, ακρίβειας, και απλότητας, χρησιμοποίηθηκε η στοίβα όπου μαζέυει δεδομένα ώστε να διαβαστούν μία και καλή.  
   Το μέγεθος της στοίβας ειναι 1024 byte, έτσι υπάρχει ένας συγκεκριμένος χρόνος στον οποίο γεμίζει, ο οποίος εξαρτάται από το [ρυθμό δειγματοληψίας](#sampling-rate) αλλά και από τους ενεργοποιημένους άξονες του αισθητήρα. Ο χρήστης μπορεί να επιλέξει ποιοί άξονες περιστροφής είναι ενεργοποιημένοι, έτσι ώστε να απενεργοποιήσει άξονες που δεν χρειάζεται και να μεγαλώσει τον παραπάνω χρόνο. Σε περίπτωση που γεμίσει η στοίβα, τα νές δεδομένα θα πανωγράφουν τα παλαιότερα εισαχθέντα σε αυτήν. 
* __private: parseSensorValues():__   Διαβάζει όλες τις τιμές της στοίβας και ανανεώνει τα αντίστοιχα πεδία με τον μέσο όρο των τιμών κάθε μέτρησης
* __refresh(int millis):__   Καλεί την parseSensorValues()
* __getMaxDT():__   Επιστρέφει τον μέγιστο χρόνο (σε millisecond) κατά τον οποίο πρέπει να καλείται η parseSensorValues() πρίν χαθούν παλιές μετρήσεις

## Configuration
